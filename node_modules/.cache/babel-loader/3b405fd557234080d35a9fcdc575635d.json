{"ast":null,"code":"var _jsxFileName = \"/home/saahil/Desktop/SE-Project/cometchatsdk/my-app/src/App.js\";\nimport React, { Component } from 'react';\nimport { Widget, addResponseMessage, addUserMessage, dropMessages } from 'react-chat-widget'; //import config from './config';\n\nimport 'react-chat-widget/lib/styles.css'; //to get the style of it \n//import { createSecureServer } from 'http2';\n\nvar request = require(\"request\");\n\nconst appid = '11117c8bb5adb87';\nconst apikey = '3244e1da16d747391d68a8e5c6a75a25ab8458c1';\n\nvar request = require(\"request\");\n\nconst agentUID = 'hellfsdgfo';\nconst customerUID = 'fsfs'; //const CUSTOMER_MESSAGE_LISTENER_KEY = \"client-listener\";\n\nconst limit = 30;\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.handleNewUserMessage = newMessage => {\n      console.log(\"New message incomig! \".concat(newMessage)); // Now send the message throught the backend API\n\n      console.log(newMessage);\n      this.sendmessage(agentUID, customerUID, newMessage);\n    };\n\n    this.createuser = function (UID) {\n      //var variable_str ='{\"uid\":'+'\"'+String(UID)+'\"'+',\"name\":\"dada\",\"role\":\"default\",\"withAuthToken\":true}'\n      //var x = \"\\'\" + variable_str + \"\\'\"\n      //variable_str = x\n      //console.log(variable_str)\n      console.log('sendmessage');\n      var options = {\n        method: 'POST',\n        url: 'https://api-eu.cometchat.io/v2.0/users',\n        headers: {\n          appid: '11117c8bb5adb87',\n          apikey: '3244e1da16d747391d68a8e5c6a75a25ab8458c1',\n          'content-type': 'application/json',\n          accept: 'application/json'\n        },\n        body: '{\"uid\":' + '\"' + String(UID) + '\"' + ',\"name\":\"client\",\"role\":\"default\",\"withAuthToken\":true}'\n      };\n      console.log(options.body);\n      request(options, function (error, response, body) {\n        if (error) throw new Error(error);\n        console.log(response); //return response;\n      });\n    };\n\n    this.sendmessage = function (agentUID, customerUID, newMessage) {\n      var options = {\n        method: 'POST',\n        url: 'https://api-eu.cometchat.io/v2.0/users/' + String(customerUID) + '/messages',\n        headers: {\n          appid: '11117c8bb5adb87',\n          apikey: '3244e1da16d747391d68a8e5c6a75a25ab8458c1',\n          'content-type': 'application/json',\n          accept: 'application/json'\n        },\n        //body: '{\"uid\":'+'\"'+String(UID)+'\"'+',\"name\":\"client\",\"role\":\"default\",\"withAuthToken\":true}'\n        body: '{\"receiver\":' + '\"' + String(agentUID) + '\"' + ',\"receiverType\":\"user\",\"category\":\"message\",\"type\":\"text\",\"data\":{\"text\":\"Hi Tom!\"}}'\n      };\n      request(options, function (error, response, body) {\n        if (error) throw new Error(error);\n        console.log(body);\n      });\n    };\n  }\n\n  componentDidMount() {\n    addResponseMessage('You are now chatting with your broker ');\n    addResponseMessage('Do not share sensitive data with the broker');\n    let uid = localStorage.getItem(customerUID);\n    let uidb = localStorage.getItem(agentUID);\n\n    if (uid === null) {\n      this.createuser(customerUID); //for customer \n\n      localStorage.setItem(\"cc-uid\", customerUID);\n    }\n\n    if (uidb == null) {\n      this.createuser(agentUID); //for broker\n\n      localStorage.setItem(\"cc-uid\", agentUID);\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }, React.createElement(Widget, {\n      handleNewUserMessage: this.handleNewUserMessage,\n      title: \"Broker-Chat\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/saahil/Desktop/SE-Project/cometchatsdk/my-app/src/App.js"],"names":["React","Component","Widget","addResponseMessage","addUserMessage","dropMessages","request","require","appid","apikey","agentUID","customerUID","limit","App","handleNewUserMessage","newMessage","console","log","sendmessage","createuser","UID","options","method","url","headers","accept","body","String","error","response","Error","componentDidMount","uid","localStorage","getItem","uidb","setItem","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,MAAT,EAAiBC,kBAAjB,EAAqCC,cAArC,EAAqDC,YAArD,QAAyE,mBAAzE,C,CACA;;AACA,OAAO,kCAAP,C,CAA0C;AAC1C;;AAGA,IAAIC,OAAO,GAAGC,OAAO,CAAC,SAAD,CAArB;;AAEA,MAAMC,KAAK,GAAC,iBAAZ;AACA,MAAMC,MAAM,GAAC,0CAAb;;AAGA,IAAIH,OAAO,GAAGC,OAAO,CAAC,SAAD,CAArB;;AAEA,MAAMG,QAAQ,GAAG,YAAjB;AACA,MAAMC,WAAW,GAAC,MAAlB,C,CAEA;;AACA,MAAMC,KAAK,GAAG,EAAd;;AACA,MAAMC,GAAN,SAAkBZ,SAAlB,CAA4B;AAAA;AAAA;;AAAA,SA+B1Ba,oBA/B0B,GA+BFC,UAAD,IAAgB;AAErCC,MAAAA,OAAO,CAACC,GAAR,gCAAoCF,UAApC,GAFqC,CAGrC;;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYF,UAAZ;AACA,WAAKG,WAAL,CAAiBR,QAAjB,EAA0BC,WAA1B,EAAsCI,UAAtC;AAGD,KAvCyB;;AAAA,SAyC5BI,UAzC4B,GAyCf,UAAUC,GAAV,EAAc;AAC3B;AACA;AACA;AACA;AACAJ,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACE,UAAII,OAAO,GAAG;AACZC,QAAAA,MAAM,EAAE,MADI;AAEZC,QAAAA,GAAG,EAAE,wCAFO;AAGZC,QAAAA,OAAO,EAAE;AACPhB,UAAAA,KAAK,EAAE,iBADA;AAEPC,UAAAA,MAAM,EAAE,0CAFD;AAGP,0BAAgB,kBAHT;AAIPgB,UAAAA,MAAM,EAAE;AAJD,SAHG;AASZC,QAAAA,IAAI,EAAE,YAAU,GAAV,GAAcC,MAAM,CAACP,GAAD,CAApB,GAA0B,GAA1B,GAA8B;AATxB,OAAd;AAYAJ,MAAAA,OAAO,CAACC,GAAR,CAAYI,OAAO,CAACK,IAApB;AACApB,MAAAA,OAAO,CAACe,OAAD,EAAU,UAAUO,KAAV,EAAiBC,QAAjB,EAA2BH,IAA3B,EAAiC;AAChD,YAAIE,KAAJ,EAAW,MAAM,IAAIE,KAAJ,CAAUF,KAAV,CAAN;AACXZ,QAAAA,OAAO,CAACC,GAAR,CAAYY,QAAZ,EAFgD,CAGhD;AAED,OALM,CAAP;AAQD,KApE2B;;AAAA,SAsE5BX,WAtE4B,GAsEhB,UAAUR,QAAV,EAAmBC,WAAnB,EAA+BI,UAA/B,EAA2C;AACrD,UAAIM,OAAO,GAAG;AACZC,QAAAA,MAAM,EAAE,MADI;AAEZC,QAAAA,GAAG,EAAE,4CAA0CI,MAAM,CAAChB,WAAD,CAAhD,GAA8D,WAFvD;AAGZa,QAAAA,OAAO,EAAE;AACPhB,UAAAA,KAAK,EAAE,iBADA;AAEPC,UAAAA,MAAM,EAAE,0CAFD;AAGP,0BAAgB,kBAHT;AAIPgB,UAAAA,MAAM,EAAE;AAJD,SAHG;AASZ;AACAC,QAAAA,IAAI,EAAE,iBAAe,GAAf,GAAmBC,MAAM,CAACjB,QAAD,CAAzB,GAAoC,GAApC,GAAwC;AAVlC,OAAd;AAaAJ,MAAAA,OAAO,CAACe,OAAD,EAAU,UAAUO,KAAV,EAAiBC,QAAjB,EAA2BH,IAA3B,EAAiC;AAChD,YAAIE,KAAJ,EAAW,MAAM,IAAIE,KAAJ,CAAUF,KAAV,CAAN;AAEXZ,QAAAA,OAAO,CAACC,GAAR,CAAYS,IAAZ;AACD,OAJM,CAAP;AAKD,KAzF2B;AAAA;;AAC1BK,EAAAA,iBAAiB,GAAG;AAClB5B,IAAAA,kBAAkB,CAAC,wCAAD,CAAlB;AACAA,IAAAA,kBAAkB,CAAC,6CAAD,CAAlB;AACA,QAAI6B,GAAG,GAAGC,YAAY,CAACC,OAAb,CAAqBvB,WAArB,CAAV;AACA,QAAIwB,IAAI,GAACF,YAAY,CAACC,OAAb,CAAqBxB,QAArB,CAAT;;AACC,QAAIsB,GAAG,KAAK,IAAZ,EAAkB;AAEjB,WAAKb,UAAL,CAAgBR,WAAhB,EAFiB,CAEY;;AAC7BsB,MAAAA,YAAY,CAACG,OAAb,CAAqB,QAArB,EAA8BzB,WAA9B;AACD;;AACD,QAAGwB,IAAI,IAAE,IAAT,EACA;AACE,WAAKhB,UAAL,CAAgBT,QAAhB,EADF,CAC4B;;AAC1BuB,MAAAA,YAAY,CAACG,OAAb,CAAqB,QAArB,EAA8B1B,QAA9B;AACD;AAEF;;AAED2B,EAAAA,MAAM,GAAG;AACP,WACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,MAAD;AACE,MAAA,oBAAoB,EAAE,KAAKvB,oBAD7B;AAEE,MAAA,KAAK,EAAC,aAFR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF;AASD;;AA7ByB;;AA4F5B,eAAeD,GAAf","sourcesContent":["import React, { Component } from 'react';\nimport { Widget, addResponseMessage, addUserMessage, dropMessages } from 'react-chat-widget';\n//import config from './config';\nimport 'react-chat-widget/lib/styles.css';//to get the style of it \n//import { createSecureServer } from 'http2';\n\n\nvar request = require(\"request\");\n\nconst appid='11117c8bb5adb87';\nconst apikey='3244e1da16d747391d68a8e5c6a75a25ab8458c1';\n\n\nvar request = require(\"request\");\n\nconst agentUID = 'hellfsdgfo';\nconst customerUID='fsfs';\n\n//const CUSTOMER_MESSAGE_LISTENER_KEY = \"client-listener\";\nconst limit = 30;\nclass App extends Component {\n  componentDidMount() {\n    addResponseMessage('You are now chatting with your broker ');\n    addResponseMessage('Do not share sensitive data with the broker');\n    let uid = localStorage.getItem(customerUID);\n    let uidb=localStorage.getItem(agentUID);\n     if (uid === null) {\n     \n      this.createuser(customerUID);//for customer \n      localStorage.setItem(\"cc-uid\",customerUID)\n    }\n    if(uidb==null)\n    {\n      this.createuser(agentUID);//for broker\n      localStorage.setItem(\"cc-uid\",agentUID)\n    }\n    \n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Widget\n          handleNewUserMessage={this.handleNewUserMessage}\n          title='Broker-Chat'\n\n        />\n      </div>\n    );\n  }\n\n  handleNewUserMessage = (newMessage) => {\n    \n    console.log(`New message incomig! ${newMessage}`);\n    // Now send the message throught the backend API\n    console.log(newMessage);\n    this.sendmessage(agentUID,customerUID,newMessage);\n\n\n  };\n\ncreateuser = function (UID){\n//var variable_str ='{\"uid\":'+'\"'+String(UID)+'\"'+',\"name\":\"dada\",\"role\":\"default\",\"withAuthToken\":true}'\n//var x = \"\\'\" + variable_str + \"\\'\"\n//variable_str = x\n//console.log(variable_str)\nconsole.log('sendmessage')\n  var options = {\n    method: 'POST',\n    url: 'https://api-eu.cometchat.io/v2.0/users',\n    headers: {\n      appid: '11117c8bb5adb87',\n      apikey: '3244e1da16d747391d68a8e5c6a75a25ab8458c1',\n      'content-type': 'application/json',\n      accept: 'application/json'\n    },\n    body: '{\"uid\":'+'\"'+String(UID)+'\"'+',\"name\":\"client\",\"role\":\"default\",\"withAuthToken\":true}'\n    \n  };\n  console.log(options.body)\n  request(options, function (error, response, body) {\n    if (error) throw new Error(error);\n    console.log(response);\n    //return response;\n    \n  });  \n\n\n}\n\nsendmessage=function (agentUID,customerUID,newMessage) {\n  var options = {\n    method: 'POST',\n    url: 'https://api-eu.cometchat.io/v2.0/users/'+String(customerUID)+'/messages',\n    headers: {\n      appid: '11117c8bb5adb87',\n      apikey: '3244e1da16d747391d68a8e5c6a75a25ab8458c1',\n      'content-type': 'application/json',\n      accept: 'application/json'\n    },\n    //body: '{\"uid\":'+'\"'+String(UID)+'\"'+',\"name\":\"client\",\"role\":\"default\",\"withAuthToken\":true}'\n    body: '{\"receiver\":'+'\"'+String(agentUID)+'\"'+',\"receiverType\":\"user\",\"category\":\"message\",\"type\":\"text\",\"data\":{\"text\":\"Hi Tom!\"}}'\n};\n  \n  request(options, function (error, response, body) {\n    if (error) throw new Error(error);\n  \n    console.log(body);\n  });\n}\n\n}\nexport default App;"]},"metadata":{},"sourceType":"module"}